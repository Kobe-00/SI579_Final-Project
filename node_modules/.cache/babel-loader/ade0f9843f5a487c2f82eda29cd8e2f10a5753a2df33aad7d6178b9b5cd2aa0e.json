{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';import MoodSelector from'./components/MoodSelector';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[selectedMood,setSelectedMood]=useState('');const[playlist,setPlaylist]=useState([]);const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState(null);const[favorites,setFavorites]=useState(()=>{const saved=localStorage.getItem('favoriteSongs');return saved?JSON.parse(saved):[];});const[showFavoritesOnly,setShowFavoritesOnly]=useState(false);const moodKeywords={Happy:'feel good upbeat pop',Sad:'melancholy piano ballad',Energetic:'dance workout edm',Chill:'lofi chillhop acoustic',Focus:'instrumental study beats'};useEffect(()=>{localStorage.setItem('favoriteSongs',JSON.stringify(favorites));},[favorites]);const fetchSongs=async mood=>{setIsLoading(true);setError(null);try{const searchTerm=moodKeywords[mood]||mood;const response=await fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(searchTerm)}&media=music&limit=12`);if(!response.ok)throw new Error('Failed to fetch');const data=await response.json();setPlaylist(data.results);}catch(err){console.error('Error fetching songs:',err);setError('Something went wrong while fetching songs. Please try again.');}finally{setIsLoading(false);}};const handleMoodChange=mood=>{setSelectedMood(mood);setShowFavoritesOnly(false);fetchSongs(mood);};const toggleFavorite=track=>{const exists=favorites.some(fav=>fav.trackId===track.trackId);if(exists){setFavorites(favorites.filter(fav=>fav.trackId!==track.trackId));}else{setFavorites([...favorites,track]);}};const isFavorite=track=>favorites.some(fav=>fav.trackId===track.trackId);const shuffleSongs=()=>{const shuffled=[...playlist].sort(()=>Math.random()-0.5);setPlaylist(shuffled);};const tracksToDisplay=showFavoritesOnly?favorites:playlist;return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83C\\uDFA7 Mood-Based Music Finder\"}),/*#__PURE__*/_jsx(MoodSelector,{onSelect:handleMoodChange}),/*#__PURE__*/_jsx(\"div\",{className:\"top-buttons\",children:/*#__PURE__*/_jsx(\"button\",{className:\"toggle-favorites\",onClick:()=>setShowFavoritesOnly(!showFavoritesOnly),children:showFavoritesOnly?'🎵 Back to Playlist':'⭐ View Favorites'})}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"playlist-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:showFavoritesOnly?'⭐ Your Favorite Songs':selectedMood?`${selectedMood} Playlist`:'Select a Mood'}),!showFavoritesOnly&&selectedMood&&/*#__PURE__*/_jsx(\"button\",{className:\"shuffle-btn-inline\",onClick:shuffleSongs,children:\"\\uD83D\\uDD00 Shuffle\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"track-grid\",children:tracksToDisplay.map(track=>/*#__PURE__*/_jsxs(\"div\",{className:\"track-card fade-in\",onMouseEnter:e=>{const audio=e.currentTarget.querySelector('audio');if(audio){audio.muted=true;audio.play().catch(()=>{});}},onMouseLeave:e=>{const audio=e.currentTarget.querySelector('audio');if(audio){audio.pause();audio.currentTime=0;}},children:[/*#__PURE__*/_jsx(\"img\",{src:track.artworkUrl100,alt:`Artwork for ${track.trackName||'Track'}`,className:\"track-artwork\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"track-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"track-title\",children:[\"\\uD83C\\uDFB5 \",track.trackName||'Untitled Track']}),/*#__PURE__*/_jsxs(\"div\",{className:\"track-artist\",children:[\"by \",track.artistName]}),track.primaryGenreName&&/*#__PURE__*/_jsx(\"div\",{className:\"track-genre\",children:track.primaryGenreName}),track.previewUrl&&/*#__PURE__*/_jsx(\"audio\",{controls:true,src:track.previewUrl,className:\"track-audio\",children:\"Your browser does not support the audio element.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"favorite-btn\",onClick:()=>toggleFavorite(track),children:isFavorite(track)?'💖 Remove Favorite':'🤍 Add to Favorites'})]})]},track.trackId))})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","MoodSelector","jsx","_jsx","jsxs","_jsxs","App","selectedMood","setSelectedMood","playlist","setPlaylist","isLoading","setIsLoading","error","setError","favorites","setFavorites","saved","localStorage","getItem","JSON","parse","showFavoritesOnly","setShowFavoritesOnly","moodKeywords","Happy","Sad","Energetic","Chill","Focus","setItem","stringify","fetchSongs","mood","searchTerm","response","fetch","encodeURIComponent","ok","Error","data","json","results","err","console","handleMoodChange","toggleFavorite","track","exists","some","fav","trackId","filter","isFavorite","shuffleSongs","shuffled","sort","Math","random","tracksToDisplay","className","children","onSelect","onClick","style","color","map","onMouseEnter","e","audio","currentTarget","querySelector","muted","play","catch","onMouseLeave","pause","currentTime","src","artworkUrl100","alt","trackName","artistName","primaryGenreName","previewUrl","controls"],"sources":["/workspaces/SI579_Final-Project/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport MoodSelector from './components/MoodSelector';\n\nfunction App() {\n  const [selectedMood, setSelectedMood] = useState('');\n  const [playlist, setPlaylist] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [favorites, setFavorites] = useState(() => {\n    const saved = localStorage.getItem('favoriteSongs');\n    return saved ? JSON.parse(saved) : [];\n  });\n  const [showFavoritesOnly, setShowFavoritesOnly] = useState(false);\n\n  const moodKeywords = {\n    Happy: 'feel good upbeat pop',\n    Sad: 'melancholy piano ballad',\n    Energetic: 'dance workout edm',\n    Chill: 'lofi chillhop acoustic',\n    Focus: 'instrumental study beats'\n  };\n\n  useEffect(() => {\n    localStorage.setItem('favoriteSongs', JSON.stringify(favorites));\n  }, [favorites]);\n\n  const fetchSongs = async (mood) => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const searchTerm = moodKeywords[mood] || mood;\n      const response = await fetch(\n        `https://itunes.apple.com/search?term=${encodeURIComponent(searchTerm)}&media=music&limit=12`\n      );\n      if (!response.ok) throw new Error('Failed to fetch');\n      const data = await response.json();\n      setPlaylist(data.results);\n    } catch (err) {\n      console.error('Error fetching songs:', err);\n      setError('Something went wrong while fetching songs. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleMoodChange = (mood) => {\n    setSelectedMood(mood);\n    setShowFavoritesOnly(false);\n    fetchSongs(mood);\n  };\n\n  const toggleFavorite = (track) => {\n    const exists = favorites.some((fav) => fav.trackId === track.trackId);\n    if (exists) {\n      setFavorites(favorites.filter((fav) => fav.trackId !== track.trackId));\n    } else {\n      setFavorites([...favorites, track]);\n    }\n  };\n\n  const isFavorite = (track) => favorites.some((fav) => fav.trackId === track.trackId);\n\n  const shuffleSongs = () => {\n    const shuffled = [...playlist].sort(() => Math.random() - 0.5);\n    setPlaylist(shuffled);\n  };\n\n  const tracksToDisplay = showFavoritesOnly ? favorites : playlist;\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>🎧 Mood-Based Music Finder</h1>\n        <MoodSelector onSelect={handleMoodChange} />\n\n        <div className=\"top-buttons\">\n          <button\n            className=\"toggle-favorites\"\n            onClick={() => setShowFavoritesOnly(!showFavoritesOnly)}\n          >\n            {showFavoritesOnly ? '🎵 Back to Playlist' : '⭐ View Favorites'}\n          </button>\n        </div>\n\n        {error && <p style={{ color: 'red' }}>{error}</p>}\n        {isLoading && <div className=\"spinner\"></div>}\n\n        <div className=\"playlist-header\">\n          <h2>\n            {showFavoritesOnly\n              ? '⭐ Your Favorite Songs'\n              : selectedMood\n              ? `${selectedMood} Playlist`\n              : 'Select a Mood'}\n          </h2>\n\n          {!showFavoritesOnly && selectedMood && (\n            <button className=\"shuffle-btn-inline\" onClick={shuffleSongs}>\n              🔀 Shuffle\n            </button>\n          )}\n        </div>\n\n        <div className=\"track-grid\">\n          {tracksToDisplay.map((track) => (\n            <div\n              key={track.trackId}\n              className=\"track-card fade-in\"\n              onMouseEnter={(e) => {\n                const audio = e.currentTarget.querySelector('audio');\n                if (audio) {\n                  audio.muted = true;\n                  audio.play().catch(() => {});\n                }\n              }}\n              onMouseLeave={(e) => {\n                const audio = e.currentTarget.querySelector('audio');\n                if (audio) {\n                  audio.pause();\n                  audio.currentTime = 0;\n                }\n              }}\n            >\n              <img\n                src={track.artworkUrl100}\n                alt={`Artwork for ${track.trackName || 'Track'}`}\n                className=\"track-artwork\"\n              />\n              <div className=\"track-details\">\n                <div className=\"track-title\">🎵 {track.trackName || 'Untitled Track'}</div>\n                <div className=\"track-artist\">by {track.artistName}</div>\n                {track.primaryGenreName && (\n                  <div className=\"track-genre\">{track.primaryGenreName}</div>\n                )}\n                {track.previewUrl && (\n                  <audio\n                    controls\n                    src={track.previewUrl}\n                    className=\"track-audio\"\n                  >\n                    Your browser does not support the audio element.\n                  </audio>\n                )}\n                <button className=\"favorite-btn\" onClick={() => toggleFavorite(track)}>\n                  {isFavorite(track) ? '💖 Remove Favorite' : '🤍 Add to Favorites'}\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      </header>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}